// visitor_bridge.c - Bridge file to wire Go-exported callbacks to C visitor struct
// This file is compiled by cgo and can reference the Go-exported functions.
// The _cgo_export.h is automatically generated by cgo and added to include path.

#include <stdlib.h>
#include <stdbool.h>
#include <stdint.h>
#include <string.h>
#include "_cgo_export.h"

// NOTE: The bridge_visitor_t type is defined in visitor.go's C preamble.
// We just need to implement the bridge function here.

// Build visitor struct with Go callbacks - callable from Go
// The Go-exported functions are declared in _cgo_export.h
// Returns a struct with function pointers to Go callbacks.
// bridge_visitor_t is defined in visitor.go C preamble.
// MUST match field order in Rust's HtmlToMarkdownVisitorCallbacks
bridge_visitor_t bridge_build_go_visitor(void* user_data) {
    bridge_visitor_t v;
    memset(&v, 0, sizeof(v));
    v.user_data = user_data;
    // Order MUST match Rust's HtmlToMarkdownVisitorCallbacks struct
    v.visit_text = (void*)goVisitText;
    v.visit_element_start = (void*)goVisitElementStart;
    v.visit_element_end = (void*)goVisitElementEnd;
    v.visit_link = (void*)goVisitLink;
    v.visit_image = (void*)goVisitImage;
    v.visit_heading = (void*)goVisitHeading;
    v.visit_code_block = (void*)goVisitCodeBlock;
    v.visit_code_inline = (void*)goVisitCodeInline;
    v.visit_list_item = (void*)goVisitListItem;
    v.visit_list_start = (void*)goVisitListStart;
    v.visit_list_end = (void*)goVisitListEnd;
    v.visit_table_start = (void*)goVisitTableStart;
    v.visit_table_row = (void*)goVisitTableRow;
    v.visit_table_end = (void*)goVisitTableEnd;
    v.visit_blockquote = (void*)goVisitBlockquote;
    v.visit_strong = (void*)goVisitStrong;
    v.visit_emphasis = (void*)goVisitEmphasis;
    v.visit_strikethrough = (void*)goVisitStrikethrough;
    v.visit_underline = (void*)goVisitUnderline;
    v.visit_subscript = (void*)goVisitSubscript;
    v.visit_superscript = (void*)goVisitSuperscript;
    v.visit_mark = (void*)goVisitMark;
    v.visit_line_break = (void*)goVisitLineBreak;
    v.visit_horizontal_rule = (void*)goVisitHorizontalRule;
    v.visit_custom_element = (void*)goVisitCustomElement;
    v.visit_definition_list_start = (void*)goVisitDefinitionListStart;
    v.visit_definition_term = (void*)goVisitDefinitionTerm;
    v.visit_definition_description = (void*)goVisitDefinitionDescription;
    v.visit_definition_list_end = (void*)goVisitDefinitionListEnd;
    v.visit_form = (void*)goVisitForm;
    v.visit_input = (void*)goVisitInput;
    v.visit_button = (void*)goVisitButton;
    v.visit_audio = (void*)goVisitAudio;
    v.visit_video = (void*)goVisitVideo;
    v.visit_iframe = (void*)goVisitIframe;
    v.visit_details = (void*)goVisitDetails;
    v.visit_summary = (void*)goVisitSummary;
    v.visit_figure_start = (void*)goVisitFigureStart;
    v.visit_figcaption = (void*)goVisitFigcaption;
    v.visit_figure_end = (void*)goVisitFigureEnd;
    return v;
}
